{
  "hash": "18d4a1050c8b8bcfdb71fde60fd1cb1d",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Visualizar dos variables cuantitativas\"\n---\n\nEn este capíulo, crearás y personalizarás gráficos que visualizan la relación entre dos variables cuantitativas. Para ello, utilizarás gráficos se dispersión y de líneas para explorar cómo cambia el nivel de contaminación atmosférica en una ciudad a lo largo de un día y cómo se relacionan los caballos de potencia con la eficiencia del combustible en los coches. También verás otra gran ventaja de utilizar Seaborn: ¡la posibilidad de crear fácilmente subtramas en una sola figura!\n\n## Introducción a las plots (tramas) y subplots (subtramas) relacionales\n\n-   Gráficos relacionales\n\n    -   Altura vs Peso\n    -   Número de ausencias de un alumno vs Nota final\n    -   GDP vs Personas que saben leer y escribir\n\n-   Intruducción a relplot()\n\n    -   Crea gráficos relacionales: scatterplots o line plots\n\n    -   ¿Por qué usar `relplot()` en lugar de `scatterplot()`?\n\n        -   `relplot()` permite crear subgráficos en una sola figura.\n\n-   Scatterplot() vs relplot()\n\n\n    ::: {#17e369d9 .cell execution_count=1}\n    ``` {.python .cell-code}\n    # para poder mostrar el dataset en los ejemplos\n    import pandas as pd\n    tips = pd.read_csv('./data/tips.csv')\n    ```\n    :::\n    \n    \n    -   Usando `scatterplot()`\n\n\n    ::: {#d5e9f7cc .cell execution_count=2}\n    ``` {.python .cell-code}\n    import seaborn as sns\n    import matplotlib.pyplot as plt\n    \n    sns.scatterplot(x='total_bill',\n                    y='tip',\n                    data=tips)\n    plt.show()\n    ```\n    \n    ::: {.cell-output .cell-output-display}\n    ![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-3-output-1.png){}\n    :::\n    :::\n    \n    \n    -   Usando `relplot()`\n\n\n    ::: {#ded07fb6 .cell execution_count=3}\n    ``` {.python .cell-code}\n    import seaborn as sns\n    import matplotlib.pyplot as plt\n    \n    sns.relplot(x='total_bill',\n                y='tip',\n                data=tips,\n                kind='scatter')\n    plt.show()\n    ```\n    \n    ::: {.cell-output .cell-output-display}\n    ![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-4-output-1.png){}\n    :::\n    :::\n    \n    \n-   Subplots en columnas\n\n::: {#64599490 .cell execution_count=4}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill',\n            y='tip',\n            data=tips,\n            kind='scatter',\n            col='smoker')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-5-output-1.png){}\n:::\n:::\n\n\n-   Subplots en filas\n\n::: {#8cab78fe .cell execution_count=5}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill',\n            y='tip',\n            data=tips,\n            kind='scatter',\n            row='smoker')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-6-output-1.png){}\n:::\n:::\n\n\n-   Subplots en filas y columnas\n\n::: {#df3e932c .cell execution_count=6}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill',\n            y='tip',\n            data=tips,\n            kind='scatter',\n            col='smoker',\n            row='time')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-7-output-1.png){}\n:::\n:::\n\n\n-   Subgrupos por día de la semana\n\n::: {#ca9689d4 .cell execution_count=7}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill',\n            y='tip',\n            data=tips,\n            kind='scatter',\n            col='day')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-8-output-1.png){}\n:::\n:::\n\n\nEl gráfico se ve pequeño si todos estan en la misma fila\n\n-   Wrapping columns\n    -   Se pueden establecer dos gráficos por fila\n\n::: {#a064ebce .cell execution_count=8}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill',\n            y='tip',\n            data=tips,\n            kind='scatter',\n            col='day',\n            col_wrap=2)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-9-output-1.png){}\n:::\n:::\n\n\n-   Orden de las columnas\n\n::: {#e00bc824 .cell execution_count=9}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill',\n            y='tip',\n            data=tips,\n            kind='scatter',\n            col='day',\n            col_wrap=2,\n            col_order=['Thur',\n                       'Fri',\n                       'Sat',\n                       'Sun'])\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-10-output-1.png){}\n:::\n:::\n\n\n### Crear subtramas con columna y fila\n\nHemos visto en ejercicios anteriores que los alumnos con más faltas (`\"absences\"`) tienden a tener notas finales más bajas (`\"G3\"`). ¿Se mantiene esta relación independientemente de cuánto tiempo estudien los alumnos cada semana?\n\nPara responder a esto, observaremos la relación entre el número de faltas de asistencia a clase de un alumno y su calificación final en el curso, creando subtramas separadas en función del tiempo de estudio semanal de cada alumnos (`\"study_time\"`).\n\n::: {#ce09e1a0 .cell execution_count=10}\n``` {.python .cell-code}\nimport pandas as pd\nstudent_data = pd.read_csv('./data/student-alcohol-consumption.csv', index_col=0)\nstudent_data.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>school</th>\n      <th>sex</th>\n      <th>age</th>\n      <th>famsize</th>\n      <th>Pstatus</th>\n      <th>Medu</th>\n      <th>Fedu</th>\n      <th>traveltime</th>\n      <th>failures</th>\n      <th>schoolsup</th>\n      <th>...</th>\n      <th>goout</th>\n      <th>Dalc</th>\n      <th>Walc</th>\n      <th>health</th>\n      <th>absences</th>\n      <th>G1</th>\n      <th>G2</th>\n      <th>G3</th>\n      <th>location</th>\n      <th>study_time</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>18</td>\n      <td>GT3</td>\n      <td>A</td>\n      <td>4</td>\n      <td>4</td>\n      <td>2</td>\n      <td>0</td>\n      <td>yes</td>\n      <td>...</td>\n      <td>4</td>\n      <td>1</td>\n      <td>1</td>\n      <td>3</td>\n      <td>6</td>\n      <td>5</td>\n      <td>6</td>\n      <td>6</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>17</td>\n      <td>GT3</td>\n      <td>T</td>\n      <td>1</td>\n      <td>1</td>\n      <td>1</td>\n      <td>0</td>\n      <td>no</td>\n      <td>...</td>\n      <td>3</td>\n      <td>1</td>\n      <td>1</td>\n      <td>3</td>\n      <td>4</td>\n      <td>5</td>\n      <td>5</td>\n      <td>6</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>15</td>\n      <td>LE3</td>\n      <td>T</td>\n      <td>1</td>\n      <td>1</td>\n      <td>1</td>\n      <td>3</td>\n      <td>yes</td>\n      <td>...</td>\n      <td>2</td>\n      <td>2</td>\n      <td>3</td>\n      <td>3</td>\n      <td>10</td>\n      <td>7</td>\n      <td>8</td>\n      <td>10</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>15</td>\n      <td>GT3</td>\n      <td>T</td>\n      <td>4</td>\n      <td>2</td>\n      <td>1</td>\n      <td>0</td>\n      <td>no</td>\n      <td>...</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1</td>\n      <td>5</td>\n      <td>2</td>\n      <td>15</td>\n      <td>14</td>\n      <td>15</td>\n      <td>Urban</td>\n      <td>5 to 10 hours</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>16</td>\n      <td>GT3</td>\n      <td>T</td>\n      <td>3</td>\n      <td>3</td>\n      <td>1</td>\n      <td>0</td>\n      <td>no</td>\n      <td>...</td>\n      <td>2</td>\n      <td>1</td>\n      <td>2</td>\n      <td>5</td>\n      <td>4</td>\n      <td>6</td>\n      <td>10</td>\n      <td>10</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows × 29 columns</p>\n</div>\n```\n:::\n:::\n\n\n#### Instrucciones\n\n1.  Modifica el código paora utilizar `relplot()` en lugar de `scatterplot()`.\n\n::: {#0c1eae94 .cell execution_count=11}\n``` {.python .cell-code}\n# Change to use relplot() instead of scatterplot()\nsns.relplot(x='absences', y='G3',\n            data=student_data,\n            kind='scatter')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-12-output-1.png){}\n:::\n:::\n\n\n2.  Modifica el código para crear un gráfico de dispersión para cada nivel de la variable `\"study_time\"`, ordenado en columnas.\n\n::: {#255e7a5b .cell execution_count=12}\n``` {.python .cell-code}\n# Change to make subplots based on study time\nsns.relplot(x='absences', y='G3',\n            data=student_data,\n            kind='scatter',\n            col='study_time')\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-13-output-1.png){}\n:::\n:::\n\n\n3.  Adapta tu código para crear un gráfico de dispersión para cada nivel del tiempo de estudio semanal de un alumno, esta vez ordenado en filas.\n\n::: {#bd327b3e .cell execution_count=13}\n``` {.python .cell-code}\n# Change this scatter plot to arrange the plots in rows instead of columns\nsns.relplot(x='absences', y='G3',\n            data=student_data,\n            kind='scatter',\n            row='study_time')\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-14-output-1.png){}\n:::\n:::\n\n\nDebido a que estos subgráficos tenían un gran rango de valores x, es más fácil leerlos dispuestos en filas en lugar de columnas.\n\n### Crear subtramas de dos factores\n\nSigamos examinando el conjunto de datos `student_data` de alumnos de secundaria. Aquí queremos responder a la siguiente pregunta: ¿la nota del primer semestre de un alumno (`\"G1\"`) tiende a correlacionarse con su nota final (`\"G3\"`)?\n\nHay muchos aspectos de la vida de un alumno que pueden dar lugar a una nota final más alta o más baja en la clase. Por ejemplo, algunos alumnos reciben apoyo educativo adicional de su centro escolar (`\"schoolsup\"`) o de su familia (`\"famsup\"`), lo que podría traducirse en mejores notas. Intentamos controlar estos dos factores creando subtramas en función de si el alumno recibió apoyo educativo adicional de su escuela o de su familia.\n\n#### Instrucciones\n\n1.  Utiliza `relplot()` para crear un gráfico de dispersión con `\"G1\"` en el eje x y `\"G3\"` en el eje y, utilizando el DataFrame `student_data`\n\n::: {#9a7b9cfb .cell execution_count=14}\n``` {.python .cell-code}\n# Create a scatter plot fo G1 vs. G3\nsns.relplot(x='G1', y='G3',\n            data=student_data,\n            kind='scatter',\n            )\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-15-output-1.png){}\n:::\n:::\n\n\n2.  Crea subtramas **de columnas** en función de su el alumno recibió ayuda de la escuela (`\"schoolsup\"`), ordenadas de forma que \"si\" vaya antes que \"no\".\n\n::: {#33f19e85 .cell execution_count=15}\n``` {.python .cell-code}\n# Adjust to add subplots based on school support\nsns.relplot(x='G1', y='G3',\n            data=student_data,\n            kind='scatter',\n            col='schoolsup',\n            col_order=['yes', 'no']\n            )\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-16-output-1.png){}\n:::\n:::\n\n\n3.  Añade subgrupos **de filas** en función de su el alumno recibió ayuda de la familia (`\"famsup\"`), ordenados de forma que \"si\" vaya antes que \"no\". Esto dará lugar a subtramas basadas en dos factores.\n\n::: {#8c41e65e .cell execution_count=16}\n``` {.python .cell-code}\n# Adjust further to add subplots based on family support\nsns.relplot(x='G1', y='G3',\n            data=student_data,\n            kind='scatter',\n            col='schoolsup',\n            col_order=['yes', 'no'],\n            row='famsup',\n            row_order=['yes', 'no'])\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-17-output-1.png){}\n:::\n:::\n\n\nParece que la nota del primer semestre si correlaciona con la nota final, independientemente dl tipo de apoyo que recibió el estudiante.\n\n## Personalizar gráficos de dispersión\n\n-   Resumen Scatter plot\n    -   Muestran la realción entre dos variables cuantitativas.\n    -   Hemos visto:\n        -   Subplots (`col` y `row`)\n        -   Subgrupos con color (`hue`)\n    -   Nuevas personalizaciones:\n        -   Subgrupos con tamaño de punto y estilo.\n        -   Cambio en la transparencia de los puntos.\n    -   Se pueden utilizar en `scatterplot()` y `relplot()`\n-   Subgrupos con tamaño de punto\n\n::: {#4ff44722 .cell execution_count=17}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill', y='tip',\n            data=tips,\n            kind='scatter',\n            size='size')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-18-output-1.png){}\n:::\n:::\n\n\nEl gráfico anterior es difícil de leer pues todos los puntos son del mismo color. Su visualización puede facilitarse utilizando lo siguiente:\n\n-   Tamaño de punto y hue\n\n::: {#339a601b .cell execution_count=18}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill', y='tip',\n            data=tips,\n            kind='scatter',\n            size='size',\n            hue='size')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-19-output-1.png){}\n:::\n:::\n\n\n-   Subbrupos con estilo de punto\n\n::: {#a7bf5767 .cell execution_count=19}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.relplot(x='total_bill', y='tip',\n            data=tips,\n            kind='scatter',\n            hue='smoker',\n            size='smoker')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-20-output-1.png){}\n:::\n:::\n\n\n-   Cambiando la transparencia del punto\n\n::: {#1cf0333c .cell execution_count=20}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Set alpha to be between 0 and 1\nsns.relplot(x='total_bill', y='tip',\n            data=tips,\n            kind='scatter',\n            alpha=0.4)\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-21-output-1.png){}\n:::\n:::\n\n\nEste último gráfico es muy útil cuando hay gran concentración de puntos\n\n### Cambiar el tamaño de los puntos del diagrama del dispersión\n\nEn este ejercicio, exploraremos el conjunto de datos `mpg` de Seaborn, que contiene una fila por modelo de coche e incluye información como el año de fabricación del coche, el número de millas por galón (\"M.P.G.\") que alcanza, la potencia de su motor (medida en \"caballos\") y su país de origen.\n\n¿Cuál es la relación entre la potencia del motor de un coche (`\"horsepower\"`) y su eficiencia de combustible (`\"mpg\"`)? ¿Y cómo varía esta relación según el número de cilindros (`\"cylinders\"`) que tenga el coche? Averigüémoslo.\n\nSigamos utilizando `relplot()` en lugar de `scatterplot()` ya que ofrece más flexibilidad.\n\n::: {#a9c70d90 .cell execution_count=21}\n``` {.python .cell-code}\nimport pandas as pd\nmpg = pd.read_csv('./data/mpg.csv')\nmpg.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=21}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>mpg</th>\n      <th>cylinders</th>\n      <th>displacement</th>\n      <th>horsepower</th>\n      <th>weight</th>\n      <th>acceleration</th>\n      <th>model_year</th>\n      <th>origin</th>\n      <th>name</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>18.0</td>\n      <td>8</td>\n      <td>307.0</td>\n      <td>130.0</td>\n      <td>3504</td>\n      <td>12.0</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>chevrolet chevelle malibu</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>15.0</td>\n      <td>8</td>\n      <td>350.0</td>\n      <td>165.0</td>\n      <td>3693</td>\n      <td>11.5</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>buick skylark 320</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>18.0</td>\n      <td>8</td>\n      <td>318.0</td>\n      <td>150.0</td>\n      <td>3436</td>\n      <td>11.0</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>plymouth satellite</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>16.0</td>\n      <td>8</td>\n      <td>304.0</td>\n      <td>150.0</td>\n      <td>3433</td>\n      <td>12.0</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>amc rebel sst</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>17.0</td>\n      <td>8</td>\n      <td>302.0</td>\n      <td>140.0</td>\n      <td>3449</td>\n      <td>10.5</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>ford torino</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n#### Instrucciones\n\n1.  Utiliza `relplot()` y el DataFrame `mpg` para crear un gráfico de dispersión con `\"horsepower\"` en el eje x y `\"mpg\"` en el eje y. Varía el tamaño de los puntos según el número de cilindros del coche (`\"cylinders\"`).\n\n::: {#dc68feaa .cell execution_count=22}\n``` {.python .cell-code}\n# Import Matplotlib and Seaborn\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Create scatter plot of horsepower vs. mpg\nsns.relplot(x='horsepower', y='mpg',\n            data=mpg,\n            kind='scatter',\n            size='cylinders')\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-23-output-1.png){}\n:::\n:::\n\n\n2.  Para que el gráfico se más fácil de leer, utiliza `hue` para variar el color de los puntos según el número de cilindros del coche (`\"cylinders\"`).\n\n::: {#98f7f44e .cell execution_count=23}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='horsepower', y='mpg',\n            data=mpg,\n            kind='scatter',\n            size='cylinders',\n            hue='cylinders')\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-24-output-1.png){}\n:::\n:::\n\n\nLos coches con mayor potencia tienden a tener un menor número de millas por galón. También tienden a tener un mayor número de cilindros.\n\n### Cambiar el estilo de los puntos del gráfico de dispersión\n\nSigamos explorando el conjunto de datos `mpg` de Seaborn observando la relación entre la velocidad a la que se puede acelerar un coche (`\"acceleration\"`) y su eficiencia de combustible (`\"mpg\"`). ¿Varían estas propiedades según el país de origen (`\"origin\"`)?\n\nObserva que la variable `\"acceleration\"` es el tiempo de aceleración de 0 a 60 millas por hora, en segundos. Los valores más altos indican una aceleración más lenta.\n\n#### Instrucciones\n\n-   Utiliza `relplot()` y el DataFrame `mpg` para crear un gráfico de dispersión con `\"acceleration\"` en el eje x y `\"mpg\"` en el eje y. Varía el estilo y el color de los puntos de la trama según el país de origen (`\"origin\"`).\n\n::: {#73507845 .cell execution_count=24}\n``` {.python .cell-code}\n# Import Matplotlib and Seaborn\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Create a scatter plot of acceleration vs. mpg\nsns.relplot(x='acceleration', y='mpg',\n            data=mpg,\n            kind='scatter',\n            style='origin',\n            hue='origin')\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-25-output-1.png){}\n:::\n:::\n\n\nLos coches de EE.UU tienden a acelerar más rápido y obtener menos millas por galón en comparación con los coches de Europa y Japón.\n\n## Introducción a los gráficos lineales\n\n-   Qué son los diagramas de lineas?\n    -   Hay dos tipos de gráficos relacionales: scatterpltos y lineplots\n\n    -   Scatterplots\n\n        -   Cada punto en el gráfico es una observación independiente.\n\n    -   Lineplots\n\n        -   Cada punto representa la misma cosa, típicamente seguida por el tiempo.\n-   Ejemplo de Scatterplot\n\n::: {#0742f262 .cell execution_count=25}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2_mean',\n            data=air_df_mean,\n            kind='scatter')\nplt.show()\n```\n:::\n\n\n![](images/paste-1.png){width=\"370\"}\n\n-   Ejemplot de lineplot\n\n::: {#602e8919 .cell execution_count=26}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2_mean',\n            data=air_df_mean,\n            kind='Line')\nplt.show()\n```\n:::\n\n\n![](images/paste-2.png){width=\"370\"}\n\n-   Subgrupos por localización\n\n::: {#f767b4b0 .cell execution_count=27}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2_mean',\n            data=air_df_mean,\n            kind='Line',\n            style='location',\n            hue='location')\nplt.show()\n```\n:::\n\n\n![](images/paste-3.png){width=\"370\"}\n\n-   Añadiendo marcadores\n\n::: {#d34ce679 .cell execution_count=28}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2_mean',\n            data=air_df_mean,\n            kind='Line',\n            style='location',\n            hue='location',\n            markers=True)\nplt.show()\n```\n:::\n\n\n![](images/paste-4.png){width=\"370\"}\n\n-   Apagando los estilos de líneas\n\n::: {#616563ee .cell execution_count=29}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2_mean',\n            data=air_df_mean,\n            kind='Line',\n            style='location',\n            hue='location',\n            markers=True,\n            dashes=False)\nplt.show()\n```\n:::\n\n\n![](images/paste-5.png){width=\"370\"}\n\n-   Múltiples observaciones por valor de x\n    -   Scatter plot\n\n::: {#922ade2f .cell execution_count=30}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2',\n            data=air_df,\n            kind='scatter')\n\nplt.show()\n```\n:::\n\n\n![](images/paste-6.png){width=\"370\"}\n\n-   Line plot\n\n::: {#32db2626 .cell execution_count=31}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2',\n            data=air_df,\n            kind='Line')\n\nplt.show()\n```\n:::\n\n\n![](images/paste-7.png){width=\"378\"}\n\n```         \n- La región sombreada es el intervalo de confianza\n    - Asuma que el dataset es una muestra aleatoria\n    - Hay 95% de confianza que la media está dentro de este intervalo.\n    - Indicar la incertidumbre de nuestra estimación.\n```\n\n-   Reemplzando el intervalo de confianza con la desviación estándar.\n\n::: {#374960fc .cell execution_count=32}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2',\n            data=air_df,\n            kind='line',\n            ci='sd')\nplt.show()\n```\n:::\n\n\n![](images/paste-8.png){width=\"370\"}\n\n-   Desactivando el intervalo de confianza\n\n::: {#b74db612 .cell execution_count=33}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.relplot(x='hour', y='NO_2',\n            data=air_df,\n            kind='line',\n            ci=None)\nplt.show()\n```\n:::\n\n\n![](images/paste-9.png){width=\"370\"}\n\n\n### Interpretación de gráficos lineales\n\nEn este ejercicio, seguiremos explorando el conjunto de datos `mpg` de Seaborn, que contiene una fila por modelo de coche e incluye información como el año de fabricación del coche, su eficacia de combustible (medida en \"millas por galón\" o \"M.P.G\") y su país de origen (USA, Europa o Japón).\n\n¿Cómo ha cambiado con el tiempo la media de millas por galón que alcanzan estos coches? ¡Utilicemos gráficos lineales para averiguarlo!\n\n#### Instrucciones\n\n1. Utiliza `relplot()` y el DataFrame `mpg` para crear un gráfico de líneas con `\"model_year\"` en el eje x y `\"mpg\"` en el eje y.\n\n::: {#663a5570 .cell execution_count=34}\n``` {.python .cell-code}\n# Import Matplotlib and Seaborn\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Create a line plot\nsns.relplot(x='model_year', y='mpg',\n            data=mpg,\n            kind='line')\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-35-output-1.png){}\n:::\n:::\n\n\n2. **Preguntas**\n\n¿Cuál de las siguientes no es una interpretación correcta de este gráfico?\n\n**Respuestas posibles**\n\n- [ ] El promedio de millas por galón ha aumentado generalmente con el tiempo.\n- [X] La distribución de millas por galón es menor en 1973 que en 1977.\n- [ ] El intervalo de confianza del 95 % para la media de millas por galón en 1970 es de aproximadamente 16 - 19,5 millas por galón.\n- [ ] Este gráfico supone nuestros datos son una muestra aleatoria de todos los coches de US, Europa y Japón.\n\nLa región sombreada representa un intervalo de confianza para la media, no la distribución de las observaciones.\n\n\n### Visualización de la desviación estándar con gráfico de líneas\n\nEn el último ejercicio, vimos cómo ha cambiado a lo largo del tiempo la media de millas por galón que alcanzan los coches. Ahora utilicemos un gráfico lineal para visualizar cómo ha cambiado la distribución de millas por galón a lo largo del tiempo.\n\n\n#### Instrucciones\n\n- Cambia el gráfico para que el área sombreada muestre la desviación estándar en lugar del intervalo de confianza para la media.\n\n::: {#8be86e2e .cell execution_count=35}\n``` {.python .cell-code}\n# Make the shaded area show the standard deviation\nsns.relplot(x='model_year', y='mpg',\n            data=mpg,\n            kind='line',\n            errorbar='sd') # el parámetro ci fue deprecado\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-36-output-1.png){}\n:::\n:::\n\n\nA diferencia del gráfico en el último ejercicio, este gráfico nos muestra la distribución de millas por galón para todos los coches en cada año.\n\n### Trazar subgrupos en gráficos de líneas\n\nSigamos examinando el conjunto de datos `mpg`. Hemos visto que la media de millas por galón de los coches ha aumentado con el tiempo, pero, ¿cómo ha cambiado la media de caballos de los coches con el tiempo? ¿Y difiere esta tendencia según el país de origen?\n\n#### Instrucciones\n\n1. Utiliza `relplot()` y el DataFrame `mpg` para crear un gráfico de líneas con `\"model_year\"` en el eje x y `\"horse_power\"` en el eje y. Desactiva los intervalos de confianza en el gráfico.\n\n::: {#d4f7ea25 .cell execution_count=36}\n``` {.python .cell-code}\n# Import matplotlib and Seaborn\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Create line plot of model year vs. horsepower\nsns.relplot(x='model_year', y='horsepower',\n            data=mpg,\n            kind='line',\n            errorbar=None)\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-37-output-1.png){}\n:::\n:::\n\n\n2. Crea líneas diferentes para cada país (`\"origin\"`) que varíen tanto en estilo de línea como en color.\n\n::: {#c03ddf46 .cell execution_count=37}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Create line plot of model year vs. horsepower\nsns.relplot(x='model_year', y='horsepower',\n            data=mpg,\n            kind='line',\n            errorbar=None,\n            style='origin',\n            hue='origin')\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-38-output-1.png){}\n:::\n:::\n\n\n3. Añade marcadores para cada punto de datos a las líneas.\n\n- Utiliza el parámetro `dashes` para utilizar líneas continuas para todos los países, permitiendo al mismo tiempo diferentes estilos de marcador para cada línea.\n\n::: {#6f71fd16 .cell execution_count=38}\n``` {.python .cell-code}\nsns.relplot(x='model_year', y='horsepower',\n            data=mpg,\n            kind='line',\n            errorbar=None,\n            style='origin',\n            hue='origin',\n            markers=True,\n            dashes=False)\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](02_Visualizar_dos_variables_cuantitativas_files/figure-html/cell-39-output-1.png){}\n:::\n:::\n\n\nAhora hemos añadido subgrupos, podemos ver que esta tendencia a la baja en la potencia fue más pronunciada entre los coches de EE.UU.\n\n",
    "supporting": [
      "02_Visualizar_dos_variables_cuantitativas_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}
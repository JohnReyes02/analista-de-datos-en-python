{
  "hash": "72807c2c6dae571da973a49e0300616c",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Personalizar los gráficos de Seaborn\"\n---\n\nEn este último capítulo, aprenderás a añadir títulos informativos a los gráficos y etiquetas a los ejes, ¡que son una de las partes más importantes de cualquier visualización de datos! También aprenderás a personalizar el estilo de tus visualizaciones para orientar más rápidamente a tu audiencia hacia los puntos clave. Después, pondrás en común todo lo que has aprendido en los ejercicios finales del curso.\n\n## Cambiar el estilo y el color de la trama\n\n-   Por qué personalizar?\n    -   Razones para cambiar de estilo:\n        -   Preferencias personales\n        -   Mejorar la legibilidad\n        -   Guiar la interpretación\n-   Cambiando los estilos de las figuras\n    -   Los estilos de las figuras incluyen el fondo y los ejes\n    -   Opciones: \"white\", \"dark\", \"whitegrid\", \"darkgrid\", \"ticks\"\n    -   Para establecer uno de ellos como estilo global para todos los gráficos se utiliza `sns.set_style()`\n-   Estilo de figura por defecto (\"white\")\n    -   Si solo nos interesa la tendencia general:\n\n::: {#bdac0277 .cell execution_count=1}\n``` {.python .cell-code}\nsns.catplot(x='age', y='masculinity_important',\n            data=masculinity_data,\n            hue='feel_masculine',\n            kind='point')\nplt.show()\n```\n:::\n\n\n![](images/paste-27.png){width=\"370\"}\n\n-   Estilo de figura: \"whitegrid\"\n    -   Para determinar valores específicos:\n\n::: {#816dc2ed .cell execution_count=2}\n``` {.python .cell-code}\nsns.set_style('whitegrid')\n\nsns.catplot(x='age', y='masculinity_important',\n            data=masculinity_data,\n            hue='feel_masculine',\n            kind='point')\nplt.show()\n```\n:::\n\n\n![](images/paste-28.png){width=\"370\"}\n\n-   Cambiando la paleta\n    -   Los cambios en la paleta de la figura, cambia el color de los elementos principales del gráfico\n    -   `sns.set_palette()`\n    -   Use las paletas preestablecidas o personalizadas\n-   Paletas divergentes\n\n![](images/paste-29.png){width=\"370\"}\n\n-   Ejemplo (Paleta divergente)\n\n::: {#7985a369 .cell execution_count=3}\n``` {.python .cell-code}\nsns.set_palette('RdBu')\n\ncategory_order = [\"No answer\",\n                  \"Not al all\",\n                  \"Not very\",\n                  \"Somewhat\",\n                  \"Very\"]\n\nsns.catplot(x='how_masculine',\n            data=masculinity_data,\n            kind='count',\n            order=category_order)\nplt.show()\n```\n:::\n\n\n![](images/paste-30.png){width=\"370\"}\n\n-   Paletas secuenciales\n\n![](images/paste-31.png){width=\"370\"}\n\n-   Ejemplo de paleta secuencial\n\n![](images/paste-32.png){width=\"370\"}\n\n-   Paletas personalizadas\n\n::: {#899c5286 .cell execution_count=4}\n``` {.python .cell-code}\ncustom_palette = [\"red\", \"green\", \"orange\", \"blue\",\n                  \"yellow\", \"purple\"]\n\nsns.set_palette(custom_palette)\n```\n:::\n\n\n![](images/paste-34.png){width=\"370\"}\n\n::: {#5624f06d .cell execution_count=5}\n``` {.python .cell-code}\ncustom_palette = [\"#FBB4AE\", \"#B3CDE3\", \"#CCEBC5\",\n                  \"#DECBE4\", \"#FED9A6\", \"#FFFFCC\",\n                  \"#E5B8BD\", \"#FDDAEC\", \"#F2F2F2\"]\n\nsns.set_palette(custom_palette)\n```\n:::\n\n\n![](images/paste-33.png){width=\"370\"}\n\n-   Cambiar la escala del gráfico\n\n    -   En las figuras \"context\" cambia la escala de los elementos y etiquetas del gráfico\n\n    -   \\`sns.set_context()\\`\n\n    -   Del mas pequeño al más grande: \"paper\", \"notebook\", \"talk\", \"poster\".\n\n-   Contexto por defecto: \"paper\"\n\n::: {#16c34d37 .cell execution_count=6}\n``` {.python .cell-code}\nsns.catplot(x='age',\n            y='masculinity_important',\n            data=masculinity_data,\n            hue='feel_masculine',\n            kind='point')\n\nplt.show()\n```\n:::\n\n\n![](images/paste-35.png){width=\"370\"}\n\n-   Contexto grande: \"talk\"\n    -   Presentaciones donde el público este mas alejado del gráfico\n\n::: {#5a633ed5 .cell execution_count=7}\n``` {.python .cell-code}\nsns.set_context('talk')\n\nsns.catplot(x='age',\n            y='masculinity_important',\n            data=masculinity_data,\n            hue='feel_masculine',\n            kind='point')\n\nplt.show()\n```\n:::\n\n\n![](images/paste-36.png){width=\"370\"}\n\n### Cambiar de estilo y de paleta\n\nVamos a nuestro conjunto de datos que contiene los resultados de una encuestra realizada a jóvenes sobre sus hábitos y preferencias. Hemos proportcionado el código para crear un gráfico de recuento de sus respuestas a la pregunta \"¿Con qué frecuencia escuchas los consejos de tus padres?\". Ahora vamos a cambiar el estilo y la paleta para que esta trama sea más fácil de interpretar.\n\n::: {#f6c29230 .cell execution_count=8}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nruta = './data/young-people-survey-responses.csv'\nsurvey_data = pd.read_csv(ruta, index_col=0)\nsurvey_data.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Music</th>\n      <th>Techno</th>\n      <th>Movies</th>\n      <th>History</th>\n      <th>Mathematics</th>\n      <th>Pets</th>\n      <th>Spiders</th>\n      <th>Loneliness</th>\n      <th>Parents' advice</th>\n      <th>Internet usage</th>\n      <th>Finances</th>\n      <th>Age</th>\n      <th>Siblings</th>\n      <th>Gender</th>\n      <th>Village - town</th>\n      <th>Age Category</th>\n      <th>Interested in Math</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>1.0</td>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>few hours a day</td>\n      <td>3.0</td>\n      <td>20.0</td>\n      <td>1.0</td>\n      <td>female</td>\n      <td>village</td>\n      <td>Less than 21</td>\n      <td>False</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>4.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>2.0</td>\n      <td>2.0</td>\n      <td>few hours a day</td>\n      <td>3.0</td>\n      <td>19.0</td>\n      <td>2.0</td>\n      <td>female</td>\n      <td>city</td>\n      <td>Less than 21</td>\n      <td>True</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>3.0</td>\n      <td>few hours a day</td>\n      <td>2.0</td>\n      <td>20.0</td>\n      <td>2.0</td>\n      <td>female</td>\n      <td>city</td>\n      <td>Less than 21</td>\n      <td>True</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>5.0</td>\n      <td>2.0</td>\n      <td>5.0</td>\n      <td>4.0</td>\n      <td>4.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>5.0</td>\n      <td>2.0</td>\n      <td>most of the day</td>\n      <td>2.0</td>\n      <td>22.0</td>\n      <td>1.0</td>\n      <td>female</td>\n      <td>city</td>\n      <td>21+</td>\n      <td>True</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>5.0</td>\n      <td>2.0</td>\n      <td>5.0</td>\n      <td>3.0</td>\n      <td>2.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>3.0</td>\n      <td>3.0</td>\n      <td>few hours a day</td>\n      <td>4.0</td>\n      <td>20.0</td>\n      <td>1.0</td>\n      <td>female</td>\n      <td>village</td>\n      <td>Less than 21</td>\n      <td>False</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nTransformación de los datos de la columna `\"Parents' advice\"`\n\n::: {#a7457f60 .cell execution_count=9}\n``` {.python .cell-code}\nsurvey_data[\"Parents' advice\"] = survey_data[\"Parents' advice\"].map({1: 'Never',\n                                                                     2: 'Rarely',\n                                                                     3: 'Sometimes',\n                                                                     4: 'Often',\n                                                                     5: 'Always'})\n```\n:::\n\n\n#### Instrucciones\n\n1.  Configura el estilo en `\"whitegrid\"` para ayudar al público a determinar el número de respuestas de cada categoría.\n\n::: {#b3db3201 .cell execution_count=10}\n``` {.python .cell-code}\n# Set the style to \"whitegrid\"\nsns.set_style('whitegrid')\n\n# Create a count plot or survey responses\ncategory_order = ['Never', 'Rarely', 'Sometimes',\n                  'Often', 'Always']\n\nsns.catplot(x=\"Parents' advice\",\n            data=survey_data,\n            kind='count',\n            order=category_order)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-11-output-1.png){}\n:::\n:::\n\n\n2.  Establece la paleta de colores en la paleta secuencial denominada `\"Purples`.\n\n::: {#baea01ba .cell execution_count=11}\n``` {.python .cell-code}\n# Set the color palette to \"Purples\"\nsns.set_style('whitegrid')\nsns.set_palette('Purples')\n\n# Create a count plot or survey responses\ncategory_order = ['Never', 'Rarely', 'Sometimes',\n                  'Often', 'Always']\n\nsns.catplot(x=\"Parents' advice\",\n            data=survey_data,\n            kind='count',\n            order=category_order,\n            hue=\"Parents' advice\", legend=False)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-12-output-1.png){}\n:::\n:::\n\n\n3.  Cambia la paleta de colores a la paleta divergente `\"RdBu\"`\n\n::: {#e1989e32 .cell execution_count=12}\n``` {.python .cell-code}\n# Change the color palette to \"RdBu\"\nsns.set_style('whitegrid')\nsns.set_palette('RdBu')\n\n# Create a count plot or survey responses\ncategory_order = ['Never', 'Rarely', 'Sometimes',\n                  'Often', 'Always']\n\nsns.catplot(x=\"Parents' advice\",\n            data=survey_data,\n            kind='count', \n            hue=\"Parents' advice\", legend=False,\n            order=category_order)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-13-output-1.png){}\n:::\n:::\n\n\nEste estilo y la paleta de colores divergente resaltan mejor la diferencia entre el número de jóvenes que suelen escuchar los consejos de sus padres frente a los que no lo hacen.\n\n### Cambiar la escala\n\nEn este ejercicio, seguiremos examinando el conjunto de datos que contienen las respuestas de una encuesta a jóvenes. ¿Varía el porcentaje de personas que declaran sentirse solas en función del número de hermanos que tienen? Averigüémoslo utlizando un diagrama de barras, al tiempo que exploramos las cuatro escalas de diagrama diferentes de Seaborn. (\"contextos\").\n\n#### Instrucciones\n\n1.  Establece la escala (\"contexto\") en `\"paper\"`, que es la más pequieña de las opciones de escala.\n\n::: {#919162a2 .cell execution_count=13}\n``` {.python .cell-code}\n# Set the context to \"paper\"\nsns.set_context('paper')\n\n# Create bar plot\nsns.catplot(x='Siblings', y='Loneliness',\n            data=survey_data, \n            kind='bar', \n            hue='Siblings', legend=False)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-14-output-1.png){}\n:::\n:::\n\n\n2.  Cambia el contexto a `\"notebook\"` para aumentar la escala.\n\n::: {#f8204731 .cell execution_count=14}\n``` {.python .cell-code}\n# Change the context to \"notebook\"\nsns.set_context(\"notebook\")\n\n# Create a bar plot\nsns.catplot(x='Siblings', y='Loneliness',\n            data=survey_data, \n            kind='bar', \n            hue='Siblings', legend=False)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-15-output-1.png){}\n:::\n:::\n\n\n3.  Cambia el contexto a `\"talk\"` para aumentar la escala.\n\n::: {#527d6d74 .cell execution_count=15}\n``` {.python .cell-code}\n# Change the context to \"notebook\"\nsns.set_context(\"talk\")\n\n# Create a bar plot\nsns.catplot(x='Siblings', y='Loneliness',\n            data=survey_data, \n            kind='bar', \n            hue='Siblings', legend=False)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-16-output-1.png){}\n:::\n:::\n\n\n4.  Cambia el contexto a `\"poster\"`, que es la mayor escala disponbible.\n\n::: {#0b3b0eab .cell execution_count=16}\n``` {.python .cell-code}\n# Change the context to \"poster\"\nsns.set_context(\"poster\")\n\n# Create a bar plot\nsns.catplot(x='Siblings', y='Loneliness',\n            data=survey_data, \n            kind='bar', \n            hue='Siblings', legend=False)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-17-output-1.png){}\n:::\n:::\n\n\nCada nombre de contexto da la sugerencia de Seaborn sobre cuándo usar una escala de gráfico dada (es un artículo, en un cuadrno de iPythonm en una charla/presentación o en una sesión de póster).\n\n### Utilizar una paleta personalizada\n\nHasta ahora, hemos analizado varias cosas en el conjunto de datos de las respuestas a las encuestas de los jóvenes, como el uso que hacen de internet, la frecuencia con que escuchan a sus padres y cuántos de ellos dicen sentirse solos. Sin embargo, algo que no hemos hecho es un resumen básico del tipo de personas que responden a esta encuesta, incluyendo su edad y género. Proporcionar estos resúmenes básicos es siempre una buena práctica cuando se trata de un conjunto de datos desconocido.\n\nEl código proporcionado creará un diagrama de cajas que mostrará la distribución de edades de los encuestados masculinos frente a los femeninos. Vamos a ajustar el código para personalizar la apariencia , esta vez utilizando una paleta de colores personalizada.\n\n#### Instrucciones\n\n-   Establece el estilo en `\"darkgrid\"`.\n\n-   Establece una paleta de colores personalizada con los códigos hexadecimales de color `\"#39A7D0\"` y `\"#36ADA4\"`.\n\n::: {#7a9b6cf5 .cell execution_count=17}\n``` {.python .cell-code}\nsns.set_context('notebook')\n\n# Set the style to \"darkgrid\"\nsns.set_style('darkgrid')\n\n# Set a custom color palette\nsns.set_palette(['#39A7D0', '#36ADA4'])\n\n# Create the box plot of age distribution by gender\nsns.catplot(x='Gender', y='Age',\n            data=survey_data, kind='box',\n            hue='Gender', legend=False)  # se agregan pues palette sera deprecated\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-18-output-1.png){}\n:::\n:::\n\n\nParece que la edad media es la misma para hombres y mujeres, pero la distribución de las mujeres se inclina hacia edades más jóvenes que la de los hombres.\n\n## Añadir títulos y etiquetas: Parte 1\n\n-   Creando visualizaciones informativas\n    -   Se añade un título.\n    -   Las etiquetas de los ejes son informativas.\n    -   Las etiquetas del eje x estan giradas para mayor claridad.\n\n![](images/paste-37.png){width=\"570\"}\n\n-   Objetos FacetGrid vs. AxesSubplot\n\n    -   Los gráficos de Seaborn creean dos diferentes tipos de objetos: `FacetGrid` y `AxesSubplot`.\n\n::: {#89c416fc .cell execution_count=18}\n``` {.python .cell-code}\ng = sns.scatterplot(x='height', y='weight', data=df)\ntype(g)\n```\n:::\n\n\n> matplotlib.axes.\\_subplots.AxesSubplot\n\n-   FacetGrid vacío\n\n    -   Esta formado por uno o varios AxesSuubplots\n\n        ![](images/paste-38.png){width=\"370\"}\n\n-   Objetos FacetGrid vs. AxesSubplot\n\n    | Tipo de Objeto | Tipo de gráfico                  | Características      |\n    |----------------|----------------------------------|----------------------|\n    | `FacetGrid`    | `relplot()`, `catplot()`         | Puede crear subplots |\n    | `AxesSubplot`  | `scatterplot`, `countplot`, etc. | Crea un solo gráfico |\n\n-   Añadiendo un título al FacetGrid\n\n::: {#5d4f4316 .cell execution_count=19}\n``` {.python .cell-code}\ng = sns.catplot(x='Region', y='Birthrate',\n                data=gdp_data, kind='box')\n\ng.fig.suptitle('New Title',\n                y=1.03)\n\nplt.show()\n```\n:::\n\n\n![](images/paste-39.png){width=\"370\"}\n\n### FacetGrids vs. AxesSubplots\n\nEn la lección reciente, aprendimos que las funciones de trazado de Seaborn crean dos tipos diferentes de objetos: objetos `FacetGrid` y objetos `AxesSubplot`. El método para añadir un título a tu gráfico variará en función del tipo de objeto que sea.\n\nEn el código proporcionadom hemos utilizado `relplot()` con el conjunto de datos de millas por galón para crear un gráfico de dispersión que muestra la realación entre el peso de un coche y su potencia. Este gráfico de dispersión se asigna a la variable `g`. Identifiquemos de qué tipo de objeto se trata.\n\n::: {#17cf609b .cell execution_count=20}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nruta = './data/mpg.csv'\nmpg = pd.read_csv(ruta)\nmpg.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=11}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>mpg</th>\n      <th>cylinders</th>\n      <th>displacement</th>\n      <th>horsepower</th>\n      <th>weight</th>\n      <th>acceleration</th>\n      <th>model_year</th>\n      <th>origin</th>\n      <th>name</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>18.0</td>\n      <td>8</td>\n      <td>307.0</td>\n      <td>130.0</td>\n      <td>3504</td>\n      <td>12.0</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>chevrolet chevelle malibu</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>15.0</td>\n      <td>8</td>\n      <td>350.0</td>\n      <td>165.0</td>\n      <td>3693</td>\n      <td>11.5</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>buick skylark 320</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>18.0</td>\n      <td>8</td>\n      <td>318.0</td>\n      <td>150.0</td>\n      <td>3436</td>\n      <td>11.0</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>plymouth satellite</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>16.0</td>\n      <td>8</td>\n      <td>304.0</td>\n      <td>150.0</td>\n      <td>3433</td>\n      <td>12.0</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>amc rebel sst</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>17.0</td>\n      <td>8</td>\n      <td>302.0</td>\n      <td>140.0</td>\n      <td>3449</td>\n      <td>10.5</td>\n      <td>70</td>\n      <td>usa</td>\n      <td>ford torino</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n#### Instrucciones\n\n1.  Identifica qué tipo de objeto es el gráfico `g` y asígnalo a la variable `type_of_g`\n\n::: {#97a39ca6 .cell execution_count=21}\n``` {.python .cell-code}\nsns.set_style('white')\n\n# Create a scatter plot\ng = sns.relplot(x='weight', y='horsepower',\n                    data=mpg, kind='scatter')\n\n# Identify plot type\ntype_of_g = type(g)\n\n# Print type\nprint(type_of_g)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'seaborn.axisgrid.FacetGrid'>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-22-output-2.png){}\n:::\n:::\n\n\n2.  **Pregunta**\n\nAcabamos de ver que `sns.relplot()` crea objetos FacetGrid. ¿Qué otra función Seaborn crea un objeto FacetGrid en lugar de un objeto AxesSubplot?\n\n**Respuestas posibles**\n\n-   [x] `sns.catplot()`\n-   [ ] `sns.scatterplot()`\n-   [ ] `sns.boxplot()`\n-   [ ] `sns.countplot()`\n\n`catplot()` admite la creación de subgráficos, por lo que crea un objeto `FacetGrid`.\n\n### Añadir un título a un objeto FacetGrid\n\nEn el ejercicio anterior, utilizamos `relplot()` con el conjunto de datos de millas por galón para crear un gráfico de dispersión que mostrara la relación entre el peso de un coche y su potencia. Esto creó el objeto `FacetGrid`. Ahora que sabemos qué tipo de objeto es, vamos a añadir un título a esta trama.\n\n#### Instrucciones\n\n-   Añade un título a esta trama: `\"Car Wight vs. Horsepower\"`.\n\n::: {#9f4e4f24 .cell execution_count=22}\n``` {.python .cell-code}\n# Create a scatter plot\ng = sns.relplot(x='weight', y='horsepower',\n            data=mpg, kind='scatter')\n\n# Add a title \"Car Weight vs. Horsepower\"\ng.fig.suptitle('Car Weight vs. Horsepower')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-23-output-1.png){}\n:::\n:::\n\n\nParece que el peso de un coche está correlacionado positivamente con su potencia.\n\n## Añadir títulos y etiquetas: Parte 2\n\n-   Añadiendo un título a AxesSubplot\n\n    -   FacetGrid\n\n\n    ::: {#4a646fd1 .cell execution_count=23}\n    ``` {.python .cell-code}\n    g = sns.catplot(x='Region', y='Birthrate',\n                    data=gdp_data,\n                    kind='box')\n    \n    g.fig.suptitle('New Title',\n                   y=1.03)\n    ```\n    :::\n    \n    \nAxesSubplot\n\n::: {#ab7d868e .cell execution_count=24}\n``` {.python .cell-code}\ng = sns.boxplot(x='Region', y='Birtrate',\n                data=gdp_data)\n\ng.set_title('New Title',\n            y=1.03)\n```\n:::\n\n\n-   Títulos para subgráficos\n\n::: {#f8790979 .cell execution_count=25}\n``` {.python .cell-code}\ng = sns.catplot(x='Region', y='Birthrate',\n                data=gdp_data, kind='box',\n                col='Group')\n\n# Título general\ng.fig.suptitle('New Title',\n                y=1.03)\n\n# Título de cada gráfico\ng.set_title('This is {col_name}')\n```\n:::\n\n\n![](images/paste-40.png){width=\"570\"}\n\n-   Añadir etiquetas a los ejes\n\n::: {#e3394c6a .cell execution_count=26}\n``` {.python .cell-code}\ng = sns.catplot(x='Region', y='Birthrate',\n                data=gdp_data, kind='box',\n                col='Group')\n\ng.set(xlabel='New X Label',\n      ylabel='New Y Label')\n\nplt.show()\n```\n:::\n\n\n![](images/paste-41.png){width=\"370\"}\n\n-   Rotando las etiquetas del eje x\n\n::: {#f1599069 .cell execution_count=27}\n``` {.python .cell-code}\ng = sns.catplot(x='Region', y='Birthrate',\n                data=gdp_data, kind='box',\n                col='Group')\n\nplt.xticks(rotation=90)\nplt.show()\n```\n:::\n\n\n![](images/paste-42.png){width=\"370\"}\n\n### Añadir un título y etiquetas de eje\n\nSigamos examinando el conjunto de datos de millas por galón. Esta vez crearemos un gráfico lineal para responder a la pregunta: ¿Cómo cambia a lo largo del tiempo la media de millas por galón que alcanzan los coches en cada uno de los tres lugares de origen? Para mejorar la legibilidad de este gráfico, añadiremos un título y etiquetas de eje más informativas.\n\nEn el código proporcionado, creamos el gráfico de líneas utilizando la función `lineplot()`. Ten encuenta que `lineplot()` no admite la creación de subtramas, por lo que devuelve un obejeto `AxesSubplot` en lugar d eun objeto `FacetGrid`.\n\n::: {#02e418bc .cell execution_count=28}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nruta = './data/mpg_mean.csv'\nmpg_mean = pd.read_csv(ruta, index_col=0)\nmpg_mean.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>model_year</th>\n      <th>origin</th>\n      <th>mpg_mean</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>70</td>\n      <td>europe</td>\n      <td>25.200000</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>70</td>\n      <td>japan</td>\n      <td>25.500000</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>70</td>\n      <td>usa</td>\n      <td>15.272727</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>71</td>\n      <td>europe</td>\n      <td>28.750000</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>71</td>\n      <td>japan</td>\n      <td>29.500000</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n#### Instrucciones\n\n1.  Añade el siguiente título a la trama: `\"Average MPG Over Time\"`.\n\n::: {#9692ec46 .cell execution_count=29}\n``` {.python .cell-code}\n# Create a line plot\ng = sns.lineplot(x='model_year', y='mpg_mean',\n                 data=mpg_mean, hue='origin')\n\n# Add title \"Average MPG Over Time\"\ng.set_title('Average MPG Over Time')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-30-output-1.png){}\n:::\n:::\n\n\n2.  Etiqueta el eje x como `\"Car Model Year\"` y el eje y como `\"Average MPG\"`.\n\n::: {#70cfedc8 .cell execution_count=30}\n``` {.python .cell-code}\n# Create a line plot\ng = sns.lineplot(x='model_year', y='mpg_mean',\n                 data=mpg_mean, hue='origin')\n\n# Add title \"Average MPG Over Time\"\ng.set_title('Average MPG Over Time')\n\n# Add x-axis and y-axis labels\ng.set(xlabel='Car Model Year',\n      ylabel='Average MPG')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-31-output-1.png){}\n:::\n:::\n\n\nEl promedio de millas por galón logrado está aumentando con el tiempo para los tres lugares de origen, pero EE.UU.j siempre es más bajo que Europa y Japón.\n\n### Rotar etiquetas x-tick\n\nEn este ejercicio, seguiremos ecaminando el conjunto de datos de millas por galón. En el código proporcionado, creamos un gráfico de puntos que muestra la aceleración media de los coches en cada uno de los tres lugares de origen. Observa que la variable `\"acceleration\"` es el tiempo de aceleración de 0 a 60 millas por hora, en segundos. Los valores más altos indican una aceleración más lenta.\n\nUtilicemos este gráfico para practicar la rotación de las etiquetas x-tick. Recuerda que la función para rotar las etiquetas x-tick es una función independiente de Matplotlib y no una función aplicada al propio objeto gráfico.\n\n#### Instrucciones\n\n-   Gira 90 grados las etiquetas x-tick.\n\n::: {#cadbcd3d .cell execution_count=31}\n``` {.python .cell-code}\n# Create point plot\nsns.catplot(x='origin', y='acceleration',\n            data=mpg, kind='point',\n            linestyle='none', capsize=0.1)  # join=False deprecated\n\n# Rotate x-tick labels\nplt.xticks(rotation=90)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-32-output-1.png){}\n:::\n:::\n\n\nDado que los valores más altos indican una aceleración más lenta, parece que los coches de Japón y Europa tienen una aceleración significativamente más lenta en comparación con los de EE.UU.\n\n## Unirlo Todo\n\n-   Inicio Para importar Seaborn:\n\n::: {#1514a1f1 .cell execution_count=32}\n``` {.python .cell-code}\nimport seaborn as sns\n```\n:::\n\n\nPara importar Matplotlib:\n\n::: {#ffb2361b .cell execution_count=33}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\n```\n:::\n\n\nPara mostrar un gráfico:\n\n::: {#7ae0a7dd .cell execution_count=34}\n``` {.python .cell-code}\nplt.show()\n```\n:::\n\n\n-   Gráficos Relacionales\n    -   Muestran la relación entre dos variables cuantitativas.\n    -   Ejemplos: scatter plots, line plots\n\n::: {#ed07017a .cell execution_count=35}\n``` {.python .cell-code}\nsns.relplot(x='x_variable_name',\n            y='y_variable_name',\n            data=pandas_df,\n            kind='scatter')\n```\n:::\n\n\n-   Gráficos Categóricos\n    -   Describen la distribución de una variable cuantitativa dentro de categorías definida por una variable categórica\n    -   Ejemplos: bar plots, count plots, box plots, pint plots\n\n::: {#e4dcff91 .cell execution_count=36}\n``` {.python .cell-code}\nsns.catplot(x='x_variable_name',\n            y='y_variable_name',\n            data=pandas_df,\n            kind='bar')\n```\n:::\n\n\n-   Añadiendo una tercer variable (hue)\n\n    -   Configurar `hue` creatra subgrupos que son desplegados como diferentes colores en un solo gráfico\n\n    ![](images/paste-43.png){width=\"370\"}\n\n-   Añadiendo una tercer variable (row/col)\n\n    -   Configurar `row` y/o `col` en `relplot()` o `catplot()` creará subgrupos que son desplegados en subgráficos separados.\n\n    ![](images/paste-44.png){width=\"370\"}\n\n-   Personalización\n\n    -   Cambiar el fondo: `sns.set_style()`\n\n    -   Cambiar los colores de los elementos principales: `sns.set_palette()`\n\n    -   Cambiar la escala: `sns.set_context()`\n\n    -   Añadir un título\n\n        | Tipo de Objeto | Tipo de gráfico                      | Cómo añadir un título |\n        |------------------|---------------------------------|---------------------|\n        | `FacetGrid`    | `relplot()`, `catplot()`             | `g.fig.suptitle()`    |\n        | `AxesSubplot`  | `scatterplot()`, `countplot()`, etc. | `g.set_title()`       |\n\n-   Toques finales\n\n    -   Añadir etiquetas al eje x y eje y\n\n::: {#32e5de59 .cell execution_count=37}\n``` {.python .cell-code}\ng.set(xlabel='new x-axis label',\n      ylabel='new y-axis label')\n```\n:::\n\n\nRotar etiquetas el eje x\n\n::: {#359c8cf6 .cell execution_count=38}\n``` {.python .cell-code}\nplt.xticks(rotation=90)\n```\n:::\n\n\n### Diagrama de cajas con subgrupos\n\nEn este ejercicio, examinaremos el conjunto de datos que contiene las respuestas de una encuesta realizada a jóvenes. Una de las preguntas que se hicieron a los jóvenes fue: \"¿Te interesa tener mascotas?\" Exploraremos si la distribución de edades de los que responden \"si\" tiende a ser mayor o menor que la de los que responden \"no\", distinguiendo según el género.\n\n::: {#02d77122 .cell execution_count=39}\n``` {.python .cell-code}\nsurvey_data['Interested in Pets'] = survey_data['Pets'].apply(\n    lambda x: 'Yes' if x >= 4.0 else 'No')\n```\n:::\n\n\n#### Instrucciones\n\n-   Configura la paleta de colores en `\"Blues\"`.\n-   Añade subgrupos para colorear los gráficos de caja en función de `\"Interested in Pets\"`.\n-   Establece el título del objeto `FacetGrid` `g` en \\`\"Age of Those Interested in Pets vs. Not\".\n-   Realiza la visualización del gráfico utlizando una función Matplotlib.\n\n::: {#a81f6b99 .cell execution_count=40}\n``` {.python .cell-code}\n# Set palette to \"Blues\"\nsns.set_palette('Blues')\n\n# Adjust to add subgroups based on \"Interested in Pets\"\ng = sns.catplot(x='Gender', y='Age',\n                data=survey_data,\n                kind='box', hue='Interested in Pets')\n\n# Set title to \"Age of Those Interested in Pets vs. Not\"\ng.fig.suptitle('Age of Those Interested in Pets vs. Not')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-41-output-1.png){}\n:::\n:::\n\n\nDespués de controlar por género, parece que las distribuciones de edad de las personas están interesadsas en las mascotas son similares a las de las que no lo están\n\n### Diagrama de barras con subgrupos y subtramas\n\nEn este ejercicio, volveremos a nuestro conjunto de datos de la encuesta a jóvenes e investigaremos si la proporción de personas a las que les gusta la música tecno (`\"Likes Techno\"`) varía según su género. (`\"Gender\"`) o su lugar de residencia (`\"Village - town\"`). ¡Este ejercicio nos dará la oportunidad de practicar las muchas cosas que hemos aprendido a lo largo de este curso!\n\nAntes hay que transformar la columna 'Techno' por 'Likes Techno'\n\n::: {#d55bbe35 .cell execution_count=41}\n``` {.python .cell-code}\nsurvey_data['Likes Techno'] = survey_data['Techno'].apply(lambda x: True if x >= 4.0 else False)\n```\n:::\n\n\n#### Instrucciones\n\n-   Establece el estilo de la figura en `\"dark\"`.\n-   Ajusta el código del diagrama de barras para añadir subtramas basadas en `\"Gender\"`, dispuestas en columnas.\n-   Añade el título `\"Percentage of Young People Who Like Techno\"` a esta trama `FacetGrid`.\n-   Etiqueta el eje x `\"Location of Residence\"` y el eje y `\"% Who Like Techno\"`\n\n::: {#a1108119 .cell execution_count=42}\n``` {.python .cell-code}\nplt.style.use('seaborn-v0_8')\n\n# Set the figure style to \"dark\"\nsns.set_style('dark')\n\n# Adjust to add subplots per gender\ng = sns.catplot(x='Village - town', y='Likes Techno',\n                data=survey_data, kind='bar',\n                col='Gender')\n\n# Add title and axix labels\ng.fig.suptitle('Percentage of Young People Who Like Techno',\n                y=1.02)\ng.set(xlabel='Location of Residence',\n      ylabel='% Who Like Techno')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](04_Personalizar_graficos_seaborn_files/figure-html/cell-43-output-1.png){}\n:::\n:::\n\n\n## ¡Bien hecho! ¿Y ahora qué?\n\n-   Explorar y comunicar los resultados\n\n![](images/paste-45.png)\n\n-   Seguientes pasos:\n\n    -   Visualizaciones avanzadas con Seaborn\n\n    -   Matplotlib avanzado personalizado\n\n",
    "supporting": [
      "04_Personalizar_graficos_seaborn_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}
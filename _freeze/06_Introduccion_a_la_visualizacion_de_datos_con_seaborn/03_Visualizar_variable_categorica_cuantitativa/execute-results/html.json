{
  "hash": "713a44e881eeddd0bb5670fd5a017ead",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Visualizar una variable categórica y una cuantitativa\"\n---\n\nLas variables categóricas están presentes en casi todos los conjuntos de datos, pero destacan especialmente en los datos de encuestas. En este capítulo aprenderás a crear y personalizar gráficos categóricos, como gráficos de caja, gráficos de barras, gráficos de recuentro y gráficos de puntos. Por el camino, explorarás datos de encuestas a jóvenes sobre sus intereses, a estudiantes sobre sus hábitos de estudio y a hombres adultos sobre sus sentimientos acerca de la masculinidad.\n\n## Gráficos de recuento y de barras.\n\n-   Gráficos categóricos\n\n    -   Ejemplos: Gráficos de recuento y de barras\n    -   Incluyen variables categóricas.\n    -   Comparaciones entre grupos\n\n    ![](images/paste-10.png){width=\"370\"}\n\n-   catplot()\n\n    -   Usado para crear gráficos categóricos\n    -   Tiene las mismas ventajas de `relplot()`\n    -   Se pueden crear facilmente subgráficos con `col=` y `row=`\n\n-   countplot() vs. catplot()\n\n::: {#58eec53d .cell execution_count=1}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as from django.conf import settings\nsns.countplot(x='how_masculine',\n              data=maculinity_data)\n\nplt.show()\n```\n:::\n\n\n::: {#b206a049 .cell execution_count=2}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='how_masculine',\n            data=masculinity_data,\n            kind='count')\n\nplt.show()\n```\n:::\n\n\n-   Cambiando el orden\n\n::: {#ad81555a .cell execution_count=3}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\ncategory_order=['No answer',\n                'Not at all',\n                'Not very',\n                'Somewhat',\n                'Very']\nsns.catplot(x='how_masculine',\n            data=masculinity_data,\n            kind='count',\n            order=category_order)\nplt.show()\n```\n:::\n\n\n![](images/paste-12.png){width=\"370\"}\n\n-   Gráfico de barras\n\n    -   Muestran la media de una variable cuantitativa por categoría\n\n::: {#35d90714 .cell execution_count=4}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='day', y='total_bill',\n            data=tips,\n            kind='bar')\nplt.show()\n```\n:::\n\n\n![](images/paste-13.png){width=\"370\"}\n\n-   Intervalos de confianza\n\n    -   Las líneas muestran los intervalos de confianza del 95% para la media.\n    -   Muestran el nivel de incertidumbre sobre las estimaciones.\n    -   Asumiendo que nuestros datos sean una muestra aleatoria.\n\n-   Desactivando los intervalos de confianza\n\n::: {#2e022067 .cell execution_count=5}\n``` {.python .cell-code}\nimport matplotlib.plyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='day', y='total_bill',\n            data=tips,\n            kind='bar',\n            ci=None)\nplt.show()\n```\n:::\n\n\n![](images/paste-14.png){width=\"370\"}\n\n-   Cambiando la orientación de las barras\n\n::: {#6d487437 .cell execution_count=6}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='total_bill', y='day',\n            data=tips,\n            kind='bar')\n```\n:::\n\n\n![](images/paste-15.png){width=\"370\"}\n\nEs común poner la variable categórica en el eje x\n\n### Gráficos de recuento\n\nEn este ejercicio, volveremos a explorar nuestro conjunto de datos que contiene las respuestas a una encuesta enviada a los jóvenes. Podríamos sospechar que los jóvenes pasan mucho tiempo en internet, pero ¿Cuánto declaran utilizar internet al día? Utilicemos un gráfico de recunto para desglosar el número de respuestas de la encuesta en cada categoría y luego exploremos si cambia en función de la edad.\n\nComo recordatorio, para crear un gráfico de recuento, utilizaremos la función `catplot()` y especificaremos el nombre de la variable categórica a contar (`x=____`), el DataFrame de pandas a utilizar (`data=____`), y el tipo de gráfico (`kind=\"count\"`).\n\n::: {#8ca08225 .cell execution_count=7}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nplt.rcParams['figure.figsize'] = (10, 5)\n\nruta = './data/young-people-survey-responses.csv'\nsurvey_data = pd.read_csv(ruta, index_col=0)\nsurvey_data.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Music</th>\n      <th>Techno</th>\n      <th>Movies</th>\n      <th>History</th>\n      <th>Mathematics</th>\n      <th>Pets</th>\n      <th>Spiders</th>\n      <th>Loneliness</th>\n      <th>Parents' advice</th>\n      <th>Internet usage</th>\n      <th>Finances</th>\n      <th>Age</th>\n      <th>Siblings</th>\n      <th>Gender</th>\n      <th>Village - town</th>\n      <th>Age Category</th>\n      <th>Interested in Math</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>1.0</td>\n      <td>3.0</td>\n      <td>4.0</td>\n      <td>few hours a day</td>\n      <td>3.0</td>\n      <td>20.0</td>\n      <td>1.0</td>\n      <td>female</td>\n      <td>village</td>\n      <td>Less than 21</td>\n      <td>False</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>4.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>2.0</td>\n      <td>2.0</td>\n      <td>few hours a day</td>\n      <td>3.0</td>\n      <td>19.0</td>\n      <td>2.0</td>\n      <td>female</td>\n      <td>city</td>\n      <td>Less than 21</td>\n      <td>True</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>5.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>3.0</td>\n      <td>few hours a day</td>\n      <td>2.0</td>\n      <td>20.0</td>\n      <td>2.0</td>\n      <td>female</td>\n      <td>city</td>\n      <td>Less than 21</td>\n      <td>True</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>5.0</td>\n      <td>2.0</td>\n      <td>5.0</td>\n      <td>4.0</td>\n      <td>4.0</td>\n      <td>1.0</td>\n      <td>5.0</td>\n      <td>5.0</td>\n      <td>2.0</td>\n      <td>most of the day</td>\n      <td>2.0</td>\n      <td>22.0</td>\n      <td>1.0</td>\n      <td>female</td>\n      <td>city</td>\n      <td>21+</td>\n      <td>True</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>5.0</td>\n      <td>2.0</td>\n      <td>5.0</td>\n      <td>3.0</td>\n      <td>2.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>3.0</td>\n      <td>3.0</td>\n      <td>few hours a day</td>\n      <td>4.0</td>\n      <td>20.0</td>\n      <td>1.0</td>\n      <td>female</td>\n      <td>village</td>\n      <td>Less than 21</td>\n      <td>False</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n#### Instrucciones\n\n1.  Utiliza `sns.catplot()` para crear un gráfico de recuento utilizando el DataFrame `survery_data` con `\"Internet usage\"` en el eje x.\n\n::: {#145208e3 .cell execution_count=8}\n``` {.python .cell-code}\n# Create count plot of internet usage\nsns.catplot(x='Internet usage',\n            data=survey_data,\n            kind='count')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-9-output-1.png){}\n:::\n:::\n\n\n2.  Haz que las barras sean horizontales en lugar de verticales\n\n::: {#8beed17b .cell execution_count=9}\n``` {.python .cell-code}\n# Change the orientation of the plot\nsns.catplot(y='Internet usage',\n            data=survey_data,\n            kind='count')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-10-output-1.png){}\n:::\n:::\n\n\n3.  Separa este gráfico en dos subtramas de columnas contiguas en función de `\"Age Category\"`, que separa a los encuestados en menores de 21 años y mayores de 21 años. A partir de 21 años.\n\n::: {#dd649d5e .cell execution_count=10}\n``` {.python .cell-code}\n# Separate ubti cikynb subplots based on age category\nsns.catplot(y='Internet usage',\n            data=survey_data,\n            kind='count',\n            col='Age Category')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-11-output-1.png){}\n:::\n:::\n\n\nParece que la mayoría de los jóvenes usan internet durante pocas horas todos los días, independientemente de su edad.\n\n### Diagramas de barras con porcentajes\n\nSigamos explorando las respuestas a una encuesta enviada a los jóvenes. La variable `\"Interested in Math\"` es `True` si la persona declaró estar interesada o muy interesada en las matemáticas, y `False` en caso contrario. ¿Qué porcentaje de jóvenes afirma estar interesado en las matemáticas, y varía esto en función del género? Utilicemos un diagrama de barras para averiguarlo.\n\nComo recordatorio, crearemos un gráfico de barras utilizando la función `catplot()`, proporcionando el nombre de la varible categórica a poner en el eje x (`x=____`), el nombre de la variable cuantitativa a resumir en el eje y (`y=____`), el DataFrame de pandas a utilizar (`data=____`), y el tipo de gráfico categórico (`kind=\"bar\"`).\n\n#### Instrucciones\n\n-   Utiliza el DataFrame `survey_data` y `sns.catplot()` para crear un gráfico de barras con `\"Gender\"` en el eje x y `\"Interested in Math\"` en el eje y.\n\n::: {#d16d3679 .cell execution_count=11}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Create a bar plot of interest in math, separated by gender \nsns.catplot(x='Gender', y='Interested in Math',\n            data=survey_data,\n            kind='bar')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-12-output-1.png){}\n:::\n:::\n\n\nCuando la variable y es Verdadero/Falso, los gráficos de barras mostrarán el porcentaje de respuestas que informan Verdadero. Este gráfico nos muestra que los hombres informan un interés mucho mayor en las matemáticas en comparación con las mujeres.\n\n### Personalizar gráficos de barras\n\nEn este ejercicio, exploraremos datos de alumnos de secundaria. La variable `\"study_time\"` registra el tiempo de estudio semanal declarado por cada estudiante como una de las siguientes categorías: `\"<2 hours\"`, `\"2 to 5 hours\"`, `\"5 to 10 hours\"`, o `\">10 hours\"`. ¿Los alumnos que declaran estudiar más tienden a obtener mejores notas finales Comparemos la nota media final entre los alumnos de cada categoría mediante un diagrama de barras.\n\n::: {#8decafa4 .cell execution_count=12}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nruta = './data/student-alcohol-consumption.csv'\nstudent_data = pd.read_csv(ruta, index_col=0)\nstudent_data.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>school</th>\n      <th>sex</th>\n      <th>age</th>\n      <th>famsize</th>\n      <th>Pstatus</th>\n      <th>Medu</th>\n      <th>Fedu</th>\n      <th>traveltime</th>\n      <th>failures</th>\n      <th>schoolsup</th>\n      <th>...</th>\n      <th>goout</th>\n      <th>Dalc</th>\n      <th>Walc</th>\n      <th>health</th>\n      <th>absences</th>\n      <th>G1</th>\n      <th>G2</th>\n      <th>G3</th>\n      <th>location</th>\n      <th>study_time</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>18</td>\n      <td>GT3</td>\n      <td>A</td>\n      <td>4</td>\n      <td>4</td>\n      <td>2</td>\n      <td>0</td>\n      <td>yes</td>\n      <td>...</td>\n      <td>4</td>\n      <td>1</td>\n      <td>1</td>\n      <td>3</td>\n      <td>6</td>\n      <td>5</td>\n      <td>6</td>\n      <td>6</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>17</td>\n      <td>GT3</td>\n      <td>T</td>\n      <td>1</td>\n      <td>1</td>\n      <td>1</td>\n      <td>0</td>\n      <td>no</td>\n      <td>...</td>\n      <td>3</td>\n      <td>1</td>\n      <td>1</td>\n      <td>3</td>\n      <td>4</td>\n      <td>5</td>\n      <td>5</td>\n      <td>6</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>15</td>\n      <td>LE3</td>\n      <td>T</td>\n      <td>1</td>\n      <td>1</td>\n      <td>1</td>\n      <td>3</td>\n      <td>yes</td>\n      <td>...</td>\n      <td>2</td>\n      <td>2</td>\n      <td>3</td>\n      <td>3</td>\n      <td>10</td>\n      <td>7</td>\n      <td>8</td>\n      <td>10</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>15</td>\n      <td>GT3</td>\n      <td>T</td>\n      <td>4</td>\n      <td>2</td>\n      <td>1</td>\n      <td>0</td>\n      <td>no</td>\n      <td>...</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1</td>\n      <td>5</td>\n      <td>2</td>\n      <td>15</td>\n      <td>14</td>\n      <td>15</td>\n      <td>Urban</td>\n      <td>5 to 10 hours</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>GP</td>\n      <td>F</td>\n      <td>16</td>\n      <td>GT3</td>\n      <td>T</td>\n      <td>3</td>\n      <td>3</td>\n      <td>1</td>\n      <td>0</td>\n      <td>no</td>\n      <td>...</td>\n      <td>2</td>\n      <td>1</td>\n      <td>2</td>\n      <td>5</td>\n      <td>4</td>\n      <td>6</td>\n      <td>10</td>\n      <td>10</td>\n      <td>Urban</td>\n      <td>2 to 5 hours</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows × 29 columns</p>\n</div>\n```\n:::\n:::\n\n\n#### Instrucciones\n\n1.  Utiliza `sns.catplot()` para crear un gráfico de barras con `\"study_time\"` en el eje x y la calificación final (`\"G3\"`) en el eje y, utilizando el DataFrame `student_data`.\n\n::: {#bbc82cf9 .cell execution_count=13}\n``` {.python .cell-code}\n# Create bar plot of average final grade in each study category\nsns.catplot(x='study_time', y='G3',\n            data=student_data,\n            kind='bar')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-14-output-1.png){}\n:::\n:::\n\n\n2.  Utilizando el parámetro `order` y la lista `category_order` que se proporciona, reorganiza las barras para que estén en orden de menor tiempo de estudio a mayor.\n\n::: {#83f22dad .cell execution_count=14}\n``` {.python .cell-code}\n# List of categories from lowest to highest\ncategory_order = ['<2 hours',\n                  '2 to 5 hours',\n                  '5 to 10 hours',\n                  '>10 hours']\n\n# Rearrange the categories\nsns.catplot(x='study_time', y='G3',\n            data=student_data,\n            kind='bar',\n            order=category_order)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-15-output-1.png){}\n:::\n:::\n\n\n3.  Actualiza el gráfico para que ya no muestre los intervalos de confianza.\n\n::: {#7c1836da .cell execution_count=15}\n``` {.python .cell-code}\n# List of categories from lowest to highest\ncategory_order = ['<2 hours',\n                  '2 to 5 hours',\n                  '5 to 10 hours',\n                  '>10 hours']\n\n# Rearrange the categories\nsns.catplot(x='study_time', y='G3',\n            data=student_data,\n            kind='bar',\n            order=category_order,\n            errorbar=None) # ci=None deprecated\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-16-output-1.png){}\n:::\n:::\n\n\nLos estudiantes en nuestra muestra que estudiaron más tienen un promedio de calificaciones ligeramente más alto, pero no es una relación fuerte.\n\n## Diagramas de caja\n\n-   ¿Qué es un diagrama de caja?\n    -   Muestra la distribución de datos cuantitativos.\n    -   Se puede ver la mediana, la dispersión, la asimetría y los datos atípicos.\n    -   Facilita la comparación entre grupos.\n\n![](images/paste-16.png){width=\"370\"}\n\n-   Cómo crear un diagrama de caja en Seaborn\n\n::: {#25da8cf3 .cell execution_count=16}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ng = sns.catplot(x='time', y='total_bill',\n                data=tips,\n                kind='box')\nplt.show()\n```\n:::\n\n\n![](images/paste-17.png){width=\"370\"}\n\n-   Cambiar el orden de las categorías\n\n::: {#291225b4 .cell execution_count=17}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ng = sns.catplot(x='time', y='total_bill',\n                data=tips,\n                kind='box',\n                order=['Dinner',\n                        'Lunch'])\nplt.show()\n```\n:::\n\n\n![](images/paste-18.png){width=\"370\"}\n\n-   Omitir los valores atípicos usando `sym`\n\n::: {#ee48f811 .cell execution_count=18}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ng = sns.catplot(x='time', y='total_bill',\n                data=tips,\n                kind='box',\n                sym='')\nplt.show()\n```\n:::\n\n\n![](images/paste-19.png){width=\"370\"}\n\n-   Cambiando los bigotes usando `whis`\n    -   Por defecto, los bigotes se extienden a 1.5 \\* el rango intercuartil.\n    -   Puede ser extendido a 2.0 \\* IQR: `whis=2.0`\n    -   Muestra los percentiles 5 y 95: `whis=[5, 95]`\n    -   Muestra los valores mínimo y máximo: `whis=[0, 100]`\n\n::: {#511a5944 .cell execution_count=19}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ng = sns.catplot(x='time', y='total_bill',\n                data=tips,\n                kind='box',\n                whis=[0, 100])\nplt.show()\n```\n:::\n\n\n![](images/paste-20.png){width=\"370\"}\n\n### Crea e interpreta un diagrama de cajas\n\nSigamos utilizando el conjunto de datos `student_data`. En un ejercicio anterior, exploramos la realción entre el estudio y la nota final utlizando un digrama de barras para comparar la nota final media (`\"G3\"`) entre los estudiantes de diferentes categorías de `\"study_time\"`.\n\nEn este ejercicio, intentaremos utilizar un diagrama de cajas para ver esta relación. Como recordatorio, para crear un gráfico de caja tendrás que utilizar la función `catplot()` y especificar el nombre de la variable categórica a poner en el eje x (`x=____`), el nombre de la variable cuantitativa a resumir en el eje y (`y=____`), el DataFrme de pandas a utilizar (`data=____`), y el timpo de gráfico (`kind=\"box\"`).\n\n#### Instrucciones\n\n1.  Utiliza `sns.catplot()`, y el DataFrame `student_data` para crear un gráfico de caja con `\"study_time\"` en el eje x y `\"G3\"` en el eje y. Establece el orden de las categorías en `study_time_order`.\n\n::: {#77661438 .cell execution_count=20}\n``` {.python .cell-code}\n# Specify the category ordering\nstudy_time_order = ['<2 hours', '2 to 5 hours',\n                    '5 to 10 hours', '>10 hours']\n\n# Create a box plot and set the order of the categories\nsns.catplot(x='study_time', y='G3',\n            data=student_data,\n            kind='box',\n            order=study_time_order)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-21-output-1.png){}\n:::\n:::\n\n\n2.  **Pregunta** ¿ Cuál de las siguientes es una interpretación correcta de este diagrama de caja?\n\n**Respuestas Posibles**\n\n-   [ ] El percentil 75 de las notas es más alto entre los alumnos que estudian más de 10 horas a la semana.\n-   [ ] No hay valores atípicos en estos gráficos de caja.\n-   [ ] El percentil 5 de las notas entre los alumnos que estudian memnos de 2 horas es de 5,0.\n-   [x] La nota media entre los alumnos que estudian menos de 2 horas es de 10,0.\n\nLa línea del medio de cada caja representa la mediana.\n\n### Omitir valores atípicos\n\nAhora vamos a utilizar el conjunto de datos `student_data` para ocmparar la distribución de las calificaciones finales (`\"G3\"`) entre los estudiantes que tienen acceso a internet en casa y los que no. Para ello, utilizaremos la variable \\`\"internet\", que es un indicador binario (si/no) de si un alumno tiene acceso a internet en casa.\n\nDado que internet puede ser menos accesible en las zonas rurales, añadiremos subgrupos en función de dónde viva el alumno. Pra ello, podemos utilizar la varible `\"location\"`, que es un indicador de su un estudiante vive en una localidad urbana (\"Urban\") o rural (\"Rural\").\n\nComo recordatorio, puedes omitir los valores atípicos en los gráficos de caja estableciendo el parámetro `sym` iguan a una cadena vacía (`\"\"`).\n\n#### Instrucciones\n\n-   Utiliza `sns.catplot()` para crear un gráfico de caja con el DataFrame `student_data`, poniendo `internet` en el eje x y `\"G3\"` en el eje y.\n\n::: {#360cb817 .cell execution_count=21}\n``` {.python .cell-code}\n# Create a box plot with subgroups and omit the outliers\nsns.catplot(x='internet', y='G3',\n            data=student_data,\n            kind='box',\n            col='location',\n            hue='location',\n            showfliers=False)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-22-output-1.png){}\n:::\n:::\n\n\nLas calificaciones medianas son bastante similares entre cada grupo, pero la dispersión de la distribución parece mayor entre los estudiantes que tienen acceso a internet.\n\n### Ajustar los bigotes\n\nEn la lección vimos que múltiples formas de definir los bigotes en un diagrama de caja. En esta serie de ejercicios, seguiermos utilizando el conjunto de datos `student_data` para comparar la distribución de las calificaciones finales (`\"G3\"`) entre los estudiantes que mantienen un relación romántica y los que no. Utilizaremos la variable `\"romantic\"`, que es un indicador si/no de si el alumno tiene una relación romántica.\n\nVamos a crear un diagrama de cajas para ver esta relación y probar distintas formas de definir los bigotes.\n\n#### Instrucciones\n\n1.  Ajusta el código para que los bigotes del diagrama de caja se extiendan hata 0,5 \\* IQR. Recuerda: el IQR es el rango intercuartílico.\n\n::: {#a8fb62ad .cell execution_count=22}\n``` {.python .cell-code}\n# Set the whiskers to 0.5 * IQR\nsns.catplot(x='romantic', y='G3',\n            data=student_data,\n            kind='box',\n            whis=0.5)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-23-output-1.png){}\n:::\n:::\n\n\n2.  Cambia el código para que los bigotes se extiendan hasta los percentiles 5 y 95\n\n::: {#96633bf2 .cell execution_count=23}\n``` {.python .cell-code}\n# Extend the whiskers to the 5th and 95th percentile\nsns.catplot(x='romantic', y='G3',\n            data=student_data,\n            kind='box',\n            whis=[5, 95])\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-24-output-1.png){}\n:::\n:::\n\n\n3.  Cambia el código para que los bigotes se extiendan hsta los valores mínimo y máximo.\n\n::: {#84b0253b .cell execution_count=24}\n``` {.python .cell-code}\n# Set the wiskers at the min and max values\nsns.catplot(x='romantic', y='G3',\n            data=student_data,\n            kind='box',\n            whis=[0, 100])\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-25-output-1.png){}\n:::\n:::\n\n\nLa nota media es la misma entre estos dos grupos, pero la nota máxima es más alta entre los estudiantes que no están en una relación romántica.\n\n## Gráfico de puntos\n\n-   ¿Qué son los gráficos de puntos?\n    -   Los puntos muestran la media de una variable cuantitativa.\n    -   Las líneas verticales muestran los intervalos de confianza del 95%.\n-   Gráficos de puntos vs Gráficos de líneas\n    -   Ambos muestran:\n        -   La media de una variable cuantitativa.\n        -   Los intervalos de confianza del 95% para la media\n    -   Diferencias:\n        -   Los gráficos de línea tienen variables cuantitativas (usualmente tiempo) en el eje x.\n        -   Los gráficos de puntos son variables categóricas en el eje x.\n-   Gráficos de puntos vs Gráficos de barras\n    -   Ambos muestran:\n        -   La media de una variable cuantitativa.\n        -   Los intervalos de confianza del 95% para la media\n\n![](images/paste-21.png){width=\"540\"}\n\n-   Crear un Gráfico de puntos\n\n::: {#6981a58d .cell execution_count=25}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='age', y='masculinity_important',\n            data=masculinity_data,\n            kind='point',\n            hue='feel_masculine')\n            \nplt.show()\n```\n:::\n\n\n![](images/paste-22.png){width=\"370\"}\n\n-   Desconectando los puntos\n\n::: {#344e85d6 .cell execution_count=26}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='age', y='masculinity_important',\n            data=masculinity_data,\n            kind='point',\n            hue='feel_masculine',\n            join=False)\n            \nplt.show()\n```\n:::\n\n\n![](images/paste-23.png){width=\"370\"}\n\n-   Desplegando la mediana\n\n::: {#e768b61c .cell execution_count=27}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom numpy import median\n\nsns.catplot(x='smoker', y='total_bill',\n            data=tips,\n            kind='point',\n            estimator=median)\n            \nplt.show()\n```\n:::\n\n\n![](images/paste-24.png){width=\"370\"}\n\n-   Personalizar los intervalos de confianza\n\n::: {#8c0d9f4d .cell execution_count=28}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='smoker', y='total_bill',\n            data=tips,\n            kind='point',\n            capsize=0.2)\n            \nplt.show()\n```\n:::\n\n\n![](images/paste-25.png){width=\"370\"}\n\n-   Desactivar los intervalos de confianza\n\n::: {#456d84bb .cell execution_count=29}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x='smoker', y='total_bill',\n            data=tips,\n            kind='point',\n            ci=None)\n            \nplt.show()\n```\n:::\n\n\n![](images/paste-26.png){width=\"370\"}\n\n\n### Personalizar los gráficos de puntos\n\nSigamos examinando datos de alumnos de secundaria, esta vez utilizando un gráfico de puntos para responder a la pregunta: ¿Influye la calidad de la realción familiar del alumno en el número de faltas que tiene en la escuela?\nAquí utilizaremos la variable `\"famrel\"`, que describe la calidad de la relación familiar de un alumno de 1 (muy mala) a 5 (muy buena).\n\nComo recordatorio, para crear un gráfico de puntos, utiliza la función `catplot()` y especifica el nombre de la variable categórica a poner en el eje x (`x=____`), el nombre de la variable cuantitativa a resumir en el eje y (`y=____`), el DataFrame de pandas a utilizar (`data=____`), y el tipo de gráfico categórico (`kind=\"point\"`).\n\n#### Instrucciones\n\n1. Utiliza `sns.catplot()` y el DataFrame `student_data` para crear un gráfico de puntos con `\"famrel\"` en el eje x y el número de ausencias (`\"absences\"`) en el eje y.\n\n::: {#429641e7 .cell execution_count=30}\n``` {.python .cell-code}\n# Create a point plot of family relationship vs. absences\nsns.catplot(x='famrel', y='absences',\n            data=student_data,\n            kind='point')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-31-output-1.png){}\n:::\n:::\n\n\n2. Añade \"mayúsculas\" al final de los intervalos de confianza con el tamaño `0.2`.\n\n::: {#8918aaa9 .cell execution_count=31}\n``` {.python .cell-code}\n# Add caps to the cofidence interval\nsns.catplot(x='famrel', y='absences',\n            data=student_data,\n            kind='point',\n            capsize=0.2)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-32-output-1.png){}\n:::\n:::\n\n\n3. Elimina las líneas que unen los puntos de cada categoría.\n\n::: {#a2308284 .cell execution_count=32}\n``` {.python .cell-code}\n# Remove the lines joining the points\nsns.catplot(x='famrel', y='absences',\n            data=student_data,\n            kind='point',\n            capsize=0.2,\n            linestyle='none') # deprecated join=False\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-33-output-1.png){}\n:::\n:::\n\n\nAunque el número promedio de ausencias es ligeramente menor entre los estudiantes con relaciones familiares de mayor calidad, los grandes intervalos de confianza nos dicen que no podemos estar seguros de que haya una asociación real aquí.\n\n\n### Gráficos de punto con subgrupos\n\nSigamos explorando el conjunto de datos de los alumnos de secundaria. Esta vez, formularemos la pregunta: ¿estar en una relación romántica está asociado a una mayor o menor asistencia a la escuela? ¿Y difiere esta asociación en función de la escuela a la que asisten los alumnos?\nAverigüémoslo mediante un gráfico de puntos.\n\n#### Instrucciones\n\n1. Utiliza `sns.catplot()` y el DataFrame `student_data` para crear un gráfico de puntos con el estado de la relación (`\"romantic\"`) en el eje x y el número de ausencias (`\"absences\"`) en el eje y. Colorea los puntos según la escuela a la que asistan (`\"school\"`).\n\n::: {#30349a46 .cell execution_count=33}\n``` {.python .cell-code}\n# Create a point plot that uses color to create subgroups\nsns.catplot(x='romantic', y='absences',\n            data=student_data,\n            kind='point',\n            hue='school')\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-34-output-1.png){}\n:::\n:::\n\n\n2. Desactiva los intervalos de confianza del gráfico.\n\n::: {#2897e2d4 .cell execution_count=34}\n``` {.python .cell-code}\n# Turn off the confidence intervals for this plot\nsns.catplot(x='romantic', y='absences',\n            data=student_data,\n            kind='point',\n            hue='school',\n            errorbar=None) # deprecated ci=None)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-35-output-1.png){}\n:::\n:::\n\n\n3. Como puede haber valores atípicos de alumnos con muchas ausencias, utiliza la función `median` que hemos importado de `numpy` para mostar la mediana de número de ausencias en lugar de la media.\n\n::: {#97f6b903 .cell execution_count=35}\n``` {.python .cell-code}\n# Import median function from numpy\nfrom numpy import median\n\n# Plot the median number of absences instead of the mean\nsns.catplot(x='romantic', y='absences',\n            data=student_data,\n            kind='point',\n            hue='school',\n            errorbar=None,\n            estimator=median)\n\n# Show plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03_Visualizar_variable_categorica_cuantitativa_files/figure-html/cell-36-output-1.png){}\n:::\n:::\n\n\nParece que los estudiantes en relaciones románticas tienen un promedio y una mediana más altos de ausencias en la escuela GP, pero esta asociación no se mantiene en la escuela MS.\n\n",
    "supporting": [
      "03_Visualizar_variable_categorica_cuantitativa_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}